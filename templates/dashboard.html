{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Peer Prep</title>
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
</head>
<body>
    <!-- Background Orbs -->
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>
    <div class="bg-orb bg-orb-4"></div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo" onclick="toggleProfile(event)">
    <div class="logo-icon">P</div>
    Peer Prep
    <div id="profileDropdown" class="dropdown-content">
        <p><strong>{{ user.username }}</strong></p>
        <p>Email: {{ user.email }}</p>
        <p>Bio: {{ user.profile.bio|default:'Add a short bio!' }}</p>
        <button onclick="editProfile()">Edit</button>
    </div>
</div>

            <ul class="nav-menu">
                <!--about,feautures,contact--,added all for more convinience-->  
                 <li><a href="/" class="nav-link">Home</a></li>
                 <li> <a href="/" class="nav-link"> Features</a></li>
                 <li> <a href="/" class="nav-link"> About</a></li>
                 <li> <a href="/" class="nav-link"> Contact</a></li>
                <li><a href="{% url 'dashboard' %}" class="nav-link active">Dashboard</a></li>
                
                
                
              <li>
    <a href="#" class="nav-link" onclick="confirmLogout(event)">Logout</a>
</li>




            </ul>
        </div>
    </nav>

<script>
    const modal = document.createElement('div'); 
modal.id = 'logoutModal';
modal.innerHTML = `
  <div class="modal-content">
    <p>Do you really want to logout?</p>
    <button id="confirmLogout">OK</button>
    <button id="cancelLogout">Cancel</button>
  </div>
`;
modal.style.cssText = `
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
`;
document.body.appendChild(modal);

const confirmBtn = document.getElementById('confirmLogout');
const cancelBtn = document.getElementById('cancelLogout');
const logoutLink = document.querySelector('a.nav-link[onclick]');

// Function to show modal
logoutLink.onclick = function(e) {
    e.preventDefault();
    modal.style.display = 'flex';
}

// Confirm logout
confirmBtn.onclick = function() {
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = "{% url 'logout' %}";

    const csrfInput = document.createElement('input');
    csrfInput.type = 'hidden';
    csrfInput.name = 'csrfmiddlewaretoken';
    csrfInput.value = "{{ csrf_token }}";
    form.appendChild(csrfInput);

    document.body.appendChild(form);
    form.submit();
}

// Cancel logout
cancelBtn.onclick = function() {
    modal.style.display = 'none';
}

//adding the function logic for getting info by clicing on p
function toggleProfile(e) {
    e.stopPropagation();
    const dropdown = document.getElementById('profileDropdown');
    dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';
}

// Close dropdown if clicked outside
window.onclick = function(event) {
    if (!event.target.closest('.logo')) {
        const dropdown = document.getElementById('profileDropdown');
        dropdown.style.display = 'none';
    }
}

function editProfile() {
       alert("Youw will be able to edit soon!!") 
}


</script>

    <!-- Dashboard Content -->
    <main class="main-content">
        <div class="container" style="grid-template-columns: 1fr;">
            <div class="dashboard-header">
                <h1 class="main-title">Welcome, {{ user.username }}!</h1>
                <p class="subtitle">
                    Ready to start your collaborative learning journey? Explore the features below.
                </p>
            </div>

            <div class="dashboard-grid">
                <div class="feature-card">
                    <div class="feature-icon">ðŸ‘¥</div>
                    <h3 class="feature-title">Find Study Partners</h3>
                    <p class="feature-description">Connect with peers who share your learning goals and interests.</p>
                    <button class="submit-btn" style="margin-top: 1rem;">Coming Soon</button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ðŸ“š</div>
                    <h3 class="feature-title">Study Materials</h3>
                    <p class="feature-description">Access curated learning materials and practice problems.</p>
                    <button class="submit-btn" style="margin-top: 1rem;">Coming Soon</button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ðŸ“ˆ</div>
                    <h3 class="feature-title">Progress Tracking</h3>
                    <p class="feature-description">Monitor your learning progress and achievements.</p>
                    <button class="submit-btn" style="margin-top: 1rem;">Coming Soon</button>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ðŸ’¬</div>
                    <h3 class="feature-title">Live Chat</h3>
                    <p class="feature-description">Get instant support from peers and mentors.</p>
                    <button class="submit-btn" style="margin-top: 1rem;">Coming Soon</button>
                </div>
            </div>
        </div>
    </main>

    <style>
        .logo {
    position: relative;
    cursor: pointer;
}
.dropdown-content {
    display: none;
    position: absolute;
    top: 50px; /* below the logo */
    left: 0;
    background: rgba(30,41,59,0.95);
    color: #fff;
    min-width: 220px;
    padding: 1rem;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 100;
}
.dropdown-content button {
    margin-top: 0.5rem;
    padding: 0.3rem 0.8rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background-color: #3b82f6;
    color: #fff;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
}
.modal-content {
    background: rgba(30,41,59,0.9);
    backdrop-filter: blur(10px);
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    color: #fff;
}
.modal-content button {
    margin: 0.5rem;
    padding: 0.5rem 1.2rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
#confirmLogout { background-color: #ef4444; color: #fff; }
#cancelLogout { background-color: #6b7280; color: #fff; }

        .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .feature-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            border-color: rgba(59, 130, 246, 0.4);
        }
    </style>
    {% include "footer.html" %}
</body>
</html>



